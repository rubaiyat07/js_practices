<!DOCTYPE html>
<html>
<head>
    <title>Polymorphism Payment Example</title>

    <style type="text/css">
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }

        .payment-container {
            display: inline-block;
            text-align: left;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            width: 300px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .input-group label {
            margin-bottom: 5px;
        }

        .input-group input {
            padding: 8px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        #amountDiv, #ccnDiv, #cvvpinDiv, #dateDiv, #btn, #paypalDiv, #acDiv 
        {
            display: none;
        }
    </style>
</head>
<body>

    <h2>Select Payment Method</h2>
    <div class="payment-container">
        <form id="paymentForm" name="form1">
            <label>
                <input type="radio" name="paymentMethod" value="Cash" onclick="showInputAmount()"> Cash
            </label><br>

            <label>
                <input type="radio" name="paymentMethod" value="CreditCard" onclick="showInputAmount(); showCreditCardInputs()"> Credit Card
            </label><br>

            <label>
                <input type="radio" name="paymentMethod" value="PayPal" onclick="showInputAmount(); showPayPalInputs()"> PayPal
            </label><br>

            <div class="input-group" id="amountDiv">
                <label>Enter Amount:</label>
                <input type="number" name="amount" id="amount" placeholder="Enter Amount">
            </div>

            <div class="input-group" id="acDiv">
                <label>Enter Card Holder's Name:</label>
                <input type="text" name="ac" id="ac" placeholder="Card Holder's Name">
            </div>

            <div class="input-group" id="ccnDiv">
                <label>Enter Credit Card Number:</label>
                <input type="text" name="ccn" id="ccn" placeholder="1234 1234 1234 1234" onclick="cardnumber(document.form1.ccn)">
            </div>

            <div class="input-group" id="cvvpinDiv">
                <label>Enter CVV Number:</label>
                <input type="text" name="cvvpin" id="cvvpin" placeholder="1234" pattern="[0-9]{3,4}" maxlength="4">
            </div>

            <div class="input-group" id="dateDiv">
                <label>Enter Expiry Date:</label>
                <input type="month" name="exdate" id="exdate">
            </div>

            <div class="input-group" id="paypalDiv">
                <label>Enter PayPal Acount Number:</label>
                <input type="text" name="ppa" id="ppa" placeholder="Enter PayPal Acount Number:" pattern="[0-9]{12}" maxlength="12">
            </div>

            <button id="btn" type="button" onclick="processPayment()">Submit</button>
        </form>
    </div>

    <h3 id="output"></h3>

    <script>
        class Payment {
            constructor(amount) {
                this.amount = amount;
            }

            pay() {
                return `Paid ${this.amount} using default method`;
            }
        }

        class CashPayment extends Payment {
            pay() {
                return `Paid ${this.amount} in Cash`;
            }
        }

        class CreditCardPayment extends Payment {
            pay() {
                return `Paid ${this.amount} using Credit Card`;
            }
        }

        class PayPalPayment extends Payment {
            pay() {
                return `Paid ${this.amount} via PayPal`;
            }
        }

        function showInputAmount() 
        {
            document.getElementById("amountDiv").style.display = 'block';
            document.getElementById("btn").style.display = 'block';

            // Hide credit card fields by default
            document.getElementById("acDiv").style.display = 'none';    
            document.getElementById("ccnDiv").style.display = 'none';
            document.getElementById("cvvpinDiv").style.display = 'none';
            document.getElementById("dateDiv").style.display = 'none';
            document.getElementById("paypalDiv").style.display = 'none';
        }

        function showCreditCardInputs() 
        {
            document.getElementById("ccnDiv").style.display = 'block';
            document.getElementById("cvvpinDiv").style.display = 'block';
            document.getElementById("dateDiv").style.display = 'block';
            document.getElementById("acDiv").style.display = 'block';
            onload="document.form1.ccn.focus()"
        }

        function cardnumber(para)
        {
            var cardno = /^(?:4[0-9]{12})$/;

            if(para.value.match(cardno))
            {
                alert("Thank you for purchasing by your Credit Card");
            }

            else
            {
                alert("Not a valid Credit Card");
            }
        }

        function showPayPalInputs()
        {
            document.getElementById("paypalDiv").style.display = 'block';
        }

        function processPayment() {
            let selectedMethod = document.querySelector('input[name="paymentMethod"]:checked');
            let amount = document.getElementById("amount").value.trim();
            if (!selectedMethod || amount === "") {
                alert("Please select a payment method and enter an amount.");
                return;
            }

            if (selectedMethod.value === "CreditCard") 
            {   
                let ac = document.getElementById("ac").value.trim();
                let ccn = document.getElementById("ccn").value.trim();
                let cvvpin = document.getElementById("cvvpin").value.trim();
                let exdate = document.getElementById("exdate").value.trim();

                if (ac === "" || ccn === "" || cvvpin === "" || exdate === "") 
                {
                    alert("Please fill in all Credit Card details.");
                    return;
                }
            } 

            if (selectedMethod.value === "PayPal") {
                let ppa = document.getElementById("ppa").value.trim();

                if (ppa === "")
                {
                    alert("Please insert your PayPal account number.");
                    return;
                }
            }

            let payment;

            switch (selectedMethod.value) {
                case "Cash":
                    payment = new CashPayment(amount);
                    break;
                case "CreditCard":
                    payment = new CreditCardPayment(amount);
                    break;
                case "PayPal":
                    payment = new PayPalPayment(amount);
                    break;
                default:
                    payment = new Payment(amount);
            }

            document.getElementById("output").innerText = payment.pay();
        }
    </script>
</body>
</html>
